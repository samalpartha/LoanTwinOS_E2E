(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{5966:function(e,n,s){Promise.resolve().then(s.bind(s,7002))},7002:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return l}});var t=s(7437),a=s(2265),r=s(6463),c=s(6264);function i(){let e=Number((0,r.useSearchParams)().get("loanId")||1),[n,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[o,d]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let n=await (0,c.DC)(e);s(n)}catch(e){d(e.message||String(e))}finally{l(!1)}})()},[e]);let u=e=>{switch(e.toLowerCase()){case"low":return{color:"success",label:"Low Risk",icon:"✓",description:"Standard terms, minimal due diligence required"};case"med":case"medium":return{color:"warning",label:"Medium Risk",icon:"⚡",description:"Requires attention, standard review process"};case"high":return{color:"danger",label:"High Risk",icon:"⚠",description:"Critical review required before proceeding"};default:return{color:"",label:e,icon:"•",description:""}}},m=n.reduce((e,n)=>{let s=n.risk_level.toLowerCase();return e[s]=(e[s]||0)+1,e},{});if(i)return(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"loading-overlay",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("span",{children:"Loading trade pack..."})]})});if(o)return(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("div",{className:"empty-state-icon",children:"⚠️"}),(0,t.jsx)("div",{className:"empty-state-title",children:"Unable to Load Trade Pack"}),(0,t.jsx)("p",{className:"small",children:o}),(0,t.jsx)("a",{href:"/",className:"btn primary mt-lg",children:"Go to Workspace"})]})});let h=m.high>0?{level:"High",color:"danger"}:m.med>1?{level:"Medium",color:"warning"}:{level:"Low",color:"success"};return(0,t.jsxs)("div",{className:"slide-up",children:[(0,t.jsxs)("div",{className:"card mb-md",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"h2",children:"Secondary Trade Due Diligence Pack"}),(0,t.jsx)("h2",{className:"h3 mt-sm",children:"Buyer-Side Risk Assessment"})]}),n.length>0&&(0,t.jsxs)("div",{style:{textAlign:"right"},children:[(0,t.jsx)("div",{className:"small mb-sm",children:"Overall Risk Assessment"}),(0,t.jsx)("span",{className:"tag ".concat(h.color),style:{fontSize:16,padding:"10px 20px"},children:h.level})]})]}),(0,t.jsx)("p",{className:"small mt-md",style:{maxWidth:700},children:"Automated checklist generated from agreement analysis. Covers transferability, consent requirements, sanctions restrictions, and voting thresholds for secondary market transactions."}),n.length>0&&(0,t.jsxs)("div",{className:"kpi mt-lg",children:[(0,t.jsxs)("div",{className:"box accent",children:[(0,t.jsx)("div",{className:"label",children:"Total Items"}),(0,t.jsx)("div",{className:"value",children:n.length})]}),(0,t.jsxs)("div",{className:"box",style:{borderColor:"rgba(16, 185, 129, 0.3)"},children:[(0,t.jsx)("div",{className:"label",style:{color:"var(--accent-success)"},children:"Low Risk"}),(0,t.jsx)("div",{className:"value",style:{color:"var(--accent-success)"},children:m.low||0})]}),(0,t.jsxs)("div",{className:"box",style:{borderColor:"rgba(245, 158, 11, 0.3)"},children:[(0,t.jsx)("div",{className:"label",style:{color:"var(--accent-warning)"},children:"Medium Risk"}),(0,t.jsx)("div",{className:"value",style:{color:"var(--accent-warning)"},children:m.med||0})]}),(0,t.jsxs)("div",{className:"box",style:{borderColor:"rgba(239, 68, 68, 0.3)"},children:[(0,t.jsx)("div",{className:"label",style:{color:"var(--accent-danger)"},children:"High Risk"}),(0,t.jsx)("div",{className:"value",style:{color:"var(--accent-danger)"},children:m.high||0})]})]})]}),(0,t.jsx)("div",{className:"card",children:0===n.length?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("div",{className:"empty-state-icon",children:"\uD83D\uDCCB"}),(0,t.jsx)("div",{className:"empty-state-title",children:"No Trade Pack Generated"}),(0,t.jsx)("p",{className:"small",children:"Upload and process a loan agreement to generate the due diligence checklist."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h2 mb-md",children:"Due Diligence Checklist"}),(0,t.jsx)("div",{className:"flex-col gap-md",style:{display:"flex"},children:n.map((e,n)=>{let s=u(e.risk_level);return(0,t.jsxs)("div",{className:"card-inner slide-up",style:{animationDelay:"".concat(50*n,"ms"),borderLeft:"4px solid var(--accent-".concat(s.color,")")},children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-md",children:[(0,t.jsx)("span",{style:{fontSize:24,width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"var(--radius-md)",background:"var(--accent-".concat(s.color,"-dim)")},children:s.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"small",style:{color:"var(--text-muted)"},children:e.category}),(0,t.jsx)("div",{style:{fontWeight:600,fontSize:15},children:e.item})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-sm",children:(0,t.jsxs)("div",{className:"risk-indicator",children:[(0,t.jsx)("span",{className:"risk-dot ".concat(e.risk_level.toLowerCase())}),(0,t.jsx)("span",{className:"tag ".concat(s.color),children:s.label})]})})]}),(0,t.jsxs)("div",{className:"small",style:{padding:"12px 16px",background:"var(--bg-primary)",borderRadius:"var(--radius-sm)",marginLeft:60},children:[(0,t.jsx)("strong",{style:{color:"var(--text-muted)"},children:"Rationale:"})," ",e.rationale]})]},e.id)})})]})}),n.length>0&&(0,t.jsxs)("div",{className:"card mt-md",children:[(0,t.jsx)("div",{className:"h2 mb-md",children:"Recommended Actions"}),(0,t.jsxs)("div",{className:"grid-auto",children:[(0,t.jsxs)("div",{className:"card-inner",children:[(0,t.jsxs)("div",{className:"flex items-center gap-sm mb-sm",children:[(0,t.jsx)("span",{className:"tag success",children:"✓"}),(0,t.jsx)("span",{style:{fontWeight:600},children:"Low Risk Items"})]}),(0,t.jsx)("p",{className:"small",children:"Standard review process. Document findings and proceed with normal workflow."})]}),(0,t.jsxs)("div",{className:"card-inner",children:[(0,t.jsxs)("div",{className:"flex items-center gap-sm mb-sm",children:[(0,t.jsx)("span",{className:"tag warning",children:"⚡"}),(0,t.jsx)("span",{style:{fontWeight:600},children:"Medium Risk Items"})]}),(0,t.jsx)("p",{className:"small",children:"Requires legal review. Confirm mechanics with counsel before transaction close."})]}),(0,t.jsxs)("div",{className:"card-inner",children:[(0,t.jsxs)("div",{className:"flex items-center gap-sm mb-sm",children:[(0,t.jsx)("span",{className:"tag danger",children:"⚠"}),(0,t.jsx)("span",{style:{fontWeight:600},children:"High Risk Items"})]}),(0,t.jsx)("p",{className:"small",children:"Escalate immediately. Obtain written confirmation and consider deal-specific waivers."})]})]})]})]})}function l(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"loading-overlay",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("span",{children:"Loading..."})]})}),children:(0,t.jsx)(i,{})})}},6264:function(e,n,s){"use strict";s.d(n,{CM:function(){return p},DC:function(){return v},Jr:function(){return f},Qc:function(){return c},R5:function(){return i},RH:function(){return d},Rr:function(){return u},Rt:function(){return g},dp:function(){return m},tX:function(){return r},uF:function(){return x},x4:function(){return l},xc:function(){return h},z2:function(){return o}});let t=s(357).env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8010";async function a(e){if(!e.ok)throw Error(await e.text()||e.statusText);return e.json()}async function r(e){return a(await fetch("".concat(t,"/api/loans"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}))}async function c(){return a(await fetch("".concat(t,"/api/loans/sample"),{method:"POST"}))}async function i(e,n,s){return a(await fetch("".concat(t,"/api/auth/social-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:e,email:n,social_provider:s})}))}async function l(e,n){return a(await fetch("".concat(t,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n})}))}async function o(e,n,s){return a(await fetch("".concat(t,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:e,email:n,password:s})}))}async function d(e,n){let s=new FormData;return s.append("file",n),a(await fetch("".concat(t,"/api/loans/").concat(e,"/documents"),{method:"POST",body:s}))}async function u(e){return a(await fetch("".concat(t,"/api/loans/").concat(e,"/documents")))}async function m(e,n){return a(await fetch("".concat(t,"/api/loans/").concat(e,"/process-document/").concat(n),{method:"POST"}))}async function h(e){return a(await fetch("".concat(t,"/api/loans/").concat(e,"/dlr")))}async function f(e,n){let s=n?"?query=".concat(encodeURIComponent(n)):"";return a(await fetch("".concat(t,"/api/loans/").concat(e,"/clauses").concat(s)))}async function p(e){return a(await fetch("".concat(t,"/api/loans/").concat(e,"/obligations")))}async function v(e){return a(await fetch("".concat(t,"/api/loans/").concat(e,"/trade-pack")))}function x(e){return"".concat(t,"/api/documents/").concat(e,"/file")}async function g(){try{return(await fetch("".concat(t,"/api/health"))).ok}catch(e){return!1}}},6463:function(e,n,s){"use strict";var t=s(1169);s.o(t,"usePathname")&&s.d(n,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(n,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(n,{useSearchParams:function(){return t.useSearchParams}})},357:function(e,n,s){"use strict";var t,a;e.exports=(null==(t=s.g.process)?void 0:t.env)&&"object"==typeof(null==(a=s.g.process)?void 0:a.env)?s.g.process:s(8081)},8081:function(e){!function(){var n={229:function(e){var n,s,t,a=e.exports={};function r(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(s){try{return n.call(null,e,0)}catch(s){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{s="function"==typeof clearTimeout?clearTimeout:c}catch(e){s=c}}();var l=[],o=!1,d=-1;function u(){o&&t&&(o=!1,t.length?l=t.concat(l):d=-1,l.length&&m())}function m(){if(!o){var e=i(u);o=!0;for(var n=l.length;n;){for(t=l,l=[];++d<n;)t&&t[d].run();d=-1,n=l.length}t=null,o=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===c||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(n){try{return s.call(null,e)}catch(n){return s.call(this,e)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function f(){}a.nextTick=function(e){var n=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)n[s-1]=arguments[s];l.push(new h(e,n)),1!==l.length||o||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.prependListener=f,a.prependOnceListener=f,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},s={};function t(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={exports:{}},c=!0;try{n[e](r,r.exports,t),c=!1}finally{c&&delete s[e]}return r.exports}t.ab="//";var a=t(229);e.exports=a}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5966)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{91:function(e,t,n){Promise.resolve().then(n.bind(n,3572))},3572:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(7437),s=n(2265),i=n(6463),r=n(6264);function c(){let e=Number((0,i.useSearchParams)().get("loanId")||1),[t,n]=(0,s.useState)([]),[c,o]=(0,s.useState)(!0),[l,d]=(0,s.useState)(""),[u,h]=(0,s.useState)("timeline");if((0,s.useEffect)(()=>{(async()=>{try{let t=await (0,r.CM)(e);n(t)}catch(e){d(e.message||String(e))}finally{o(!1)}})()},[e]),c)return(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"loading-overlay",children:[(0,a.jsx)("div",{className:"spinner"}),(0,a.jsx)("span",{children:"Loading obligations..."})]})});if(l)return(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"empty-state",children:[(0,a.jsx)("div",{style:{fontSize:40,marginBottom:16},children:"\uD83D\uDCC5"}),(0,a.jsx)("div",{className:"h2",children:"Unable to Load Obligations"}),(0,a.jsx)("p",{className:"small",children:l}),(0,a.jsx)("a",{href:"/",className:"btn primary mt-md",children:"Go to Workspace"})]})});let m=[...t].sort((e,t)=>(e.due_date||"").localeCompare(t.due_date||"")),f={open:"warning",complete:"success",overdue:"danger"};return(0,a.jsxs)("div",{className:"slide-up",children:[(0,a.jsx)("div",{className:"card mb-md",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h2",children:"Obligation Management"}),(0,a.jsx)("h2",{className:"h3 mt-sm",children:"Operational Lifecycle"})]}),(0,a.jsxs)("div",{className:"nav",style:{margin:0,padding:4},children:[(0,a.jsx)("button",{className:"pill ".concat("timeline"===u?"active":""),onClick:()=>h("timeline"),children:"\uD83D\uDCCA Timeline"}),(0,a.jsx)("button",{className:"pill ".concat("board"===u?"active":""),onClick:()=>h("board"),children:"\uD83D\uDCCB Status Board"}),(0,a.jsx)("button",{className:"pill ".concat("list"===u?"active":""),onClick:()=>h("list"),children:"≡ List"})]})]})}),"timeline"===u&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"h2 mb-lg",children:"Upcoming Reporting Windows"}),(0,a.jsxs)("div",{className:"flex-col gap-lg",style:{display:"flex",paddingLeft:20,borderLeft:"2px solid var(--border-subtle)"},children:[m.map((e,t)=>(0,a.jsxs)("div",{className:"slide-up",style:{position:"relative",animationDelay:"".concat(50*t,"ms")},children:[(0,a.jsx)("div",{style:{position:"absolute",left:-29,top:0,width:16,height:16,borderRadius:"50%",background:"open"===e.status?"var(--accent-primary)":"var(--accent-success)",border:"4px solid var(--bg-card)",zIndex:2}}),(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"small mono",style:{color:"var(--accent-primary)",fontWeight:600},children:e.due_date?new Date(e.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"TBD"}),(0,a.jsx)("div",{style:{fontWeight:700,fontSize:16,marginTop:4},children:e.title}),(0,a.jsx)("div",{className:"small mt-sm",style:{maxWidth:600},children:e.details})]}),(0,a.jsxs)("div",{className:"flex-col items-end",style:{display:"flex"},children:[(0,a.jsx)("span",{className:"tag ".concat(f[e.status]||""),children:e.status.toUpperCase()}),(0,a.jsx)("span",{className:"small mt-sm",children:e.role})]})]}),(0,a.jsx)("div",{className:"divider",style:{margin:"20px 0 0 0"}})]},e.id)),0===t.length&&(0,a.jsx)("div",{className:"empty-state",children:"No active obligations for this loan."})]})]}),"board"===u&&(0,a.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:20},children:["Open","Overdue","Complete"].map(e=>(0,a.jsxs)("div",{className:"flex-col gap-md",style:{display:"flex"},children:[(0,a.jsxs)("div",{className:"h2 flex items-center justify-between",style:{padding:"0 8px"},children:[e,(0,a.jsx)("span",{className:"tag",children:t.filter(t=>t.status.toLowerCase()===e.toLowerCase()).length})]}),(0,a.jsx)("div",{style:{minHeight:400,background:"rgba(255,255,255,0.02)",borderRadius:"var(--radius-lg)",padding:12},children:t.filter(t=>t.status.toLowerCase()===e.toLowerCase()).map(e=>(0,a.jsxs)("div",{className:"card-inner mb-md",style:{cursor:"grab"},children:[(0,a.jsx)("div",{className:"small mono",style:{opacity:.6},children:e.due_date}),(0,a.jsx)("div",{style:{fontWeight:600,marginTop:4},children:e.title}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-md",children:[(0,a.jsx)("span",{className:"tag",style:{fontSize:10},children:e.role}),(0,a.jsx)("button",{className:"btn-icon btn",style:{width:24,height:24,fontSize:12},children:"→"})]})]},e.id))})]},e))}),"list"===u&&(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"table-wrapper",children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Due Date"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Obligation"}),(0,a.jsx)("th",{children:"Entity"})]})}),(0,a.jsx)("tbody",{children:m.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"mono small",children:e.due_date||"TBD"}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"tag ".concat(f[e.status]||""),children:e.status})}),(0,a.jsxs)("td",{children:[(0,a.jsx)("div",{style:{fontWeight:600},children:e.title}),(0,a.jsx)("div",{className:"small",children:e.details})]}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"tag",children:e.role})})]},e.id))})]})})})]})}function o(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"card",children:"Loading..."}),children:(0,a.jsx)(c,{})})}},6264:function(e,t,n){"use strict";n.d(t,{CM:function(){return p},DC:function(){return x},Jr:function(){return f},Qc:function(){return r},R5:function(){return c},RH:function(){return d},Rr:function(){return u},Rt:function(){return v},dp:function(){return h},tX:function(){return i},uF:function(){return y},x4:function(){return o},xc:function(){return m},z2:function(){return l}});let a=n(357).env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8010";async function s(e){if(!e.ok)throw Error(await e.text()||e.statusText);return e.json()}async function i(e){return s(await fetch("".concat(a,"/api/loans"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}))}async function r(){return s(await fetch("".concat(a,"/api/loans/sample"),{method:"POST"}))}async function c(e,t,n){return s(await fetch("".concat(a,"/api/auth/social-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:e,email:t,social_provider:n})}))}async function o(e,t){return s(await fetch("".concat(a,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}))}async function l(e,t,n){return s(await fetch("".concat(a,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:e,email:t,password:n})}))}async function d(e,t){let n=new FormData;return n.append("file",t),s(await fetch("".concat(a,"/api/loans/").concat(e,"/documents"),{method:"POST",body:n}))}async function u(e){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/documents")))}async function h(e,t){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/process-document/").concat(t),{method:"POST"}))}async function m(e){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/dlr")))}async function f(e,t){let n=t?"?query=".concat(encodeURIComponent(t)):"";return s(await fetch("".concat(a,"/api/loans/").concat(e,"/clauses").concat(n)))}async function p(e){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/obligations")))}async function x(e){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/trade-pack")))}function y(e){return"".concat(a,"/api/documents/").concat(e,"/file")}async function v(){try{return(await fetch("".concat(a,"/api/health"))).ok}catch(e){return!1}}},6463:function(e,t,n){"use strict";var a=n(1169);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},357:function(e,t,n){"use strict";var a,s;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,a,s=e.exports={};function i(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var o=[],l=!1,d=-1;function u(){l&&a&&(l=!1,a.length?o=a.concat(o):d=-1,o.length&&h())}function h(){if(!l){var e=c(u);l=!0;for(var t=o.length;t;){for(a=o,o=[];++d<t;)a&&a[d].run();d=-1,t=o.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.push(new m(e,t)),1!==o.length||l||c(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}},r=!0;try{t[e](i,i.exports,a),r=!1}finally{r&&delete n[e]}return i.exports}a.ab="//";var s=a(229);e.exports=s}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=91)}),_N_E=e.O()}]);
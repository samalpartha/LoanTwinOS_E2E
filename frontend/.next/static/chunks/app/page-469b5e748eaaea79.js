(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3716:function(e,t,n){Promise.resolve().then(n.bind(n,6774))},6774:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(7437),s=n(2265),i=n(6264);function c(){let[e,t]=(0,s.useState)("New Deal Suite"),[n,c]=(0,s.useState)(null),[r,l]=(0,s.useState)([]),[o,d]=(0,s.useState)("idle"),[u,m]=(0,s.useState)("Ready to begin"),[h,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(null),[y,x]=(0,s.useState)(!1),v=()=>g(null);async function j(){v(),d("creating"),m("Initializing Deal Workspace...");try{let t=await (0,i.tX)(e);c(t.id),d("idle"),m("Workspace created successfully")}catch(e){g(e.message||"Failed to create loan"),d("error")}}async function b(){v(),d("creating"),m("Loading pre-populated Deal Set...");try{let e=await (0,i.Qc)();c(e.id),d("complete"),m("Sample Deal Set loaded! Explore the DLR and Analysis.")}catch(e){g(e.message||"Failed to load sample loan"),d("error")}}async function N(){if(0!==h.length&&n){v(),d("uploading"),m("Uploading Deal Set (".concat(h.length," documents)..."));try{let e=await Promise.all(h.map(e=>(0,i.RH)(n,e)));l(e.map(e=>e.id)),d("idle"),m("Deal Set uploaded. Analyzing cross-document relationships...")}catch(e){g(e.message||"Failed to upload Deal Set"),d("error")}}}async function w(){if(0!==r.length&&n){v(),d("processing"),m("AI Engine: Contextualizing Deal Set language...");try{await (0,i.dp)(n,r[0]),d("complete"),m("Digital Twin generated. 4 cross-references found in side letters.")}catch(e){g(e.message||"Failed to process Deal Set"),d("error")}}}let S=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)},[]),D=(0,s.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),x(!1),e.dataTransfer.files){let a=Array.from(e.dataTransfer.files).filter(e=>"application/pdf"===e.type);p(e=>[...e,...a]),!n&&a.length>0&&t(a[0].name.replace(".pdf","").replace(/_/g," ")+" Suite")}},[n]),T=()=>n?"complete"===o?100:0===r.length?33:"processing"===o?66:50:0;return(0,a.jsxs)("div",{className:"grid slide-up",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-md",children:[(0,a.jsx)("div",{className:"h2",style:{margin:0},children:"Deal Set Workspace"}),!n&&(0,a.jsx)("button",{className:"btn",onClick:b,style:{borderStyle:"dashed"},children:"⚡ Load Sample Deal Set"})]}),(0,a.jsxs)("div",{style:{marginBottom:24},children:[(0,a.jsxs)("div",{className:"flex justify-between mb-sm",children:[(0,a.jsx)("span",{className:"small",children:"Deal Maturity"}),(0,a.jsxs)("span",{className:"small mono",children:[T(),"%"]})]}),(0,a.jsx)("div",{className:"progress-bar",children:(0,a.jsx)("div",{className:"fill",style:{width:"".concat(T(),"%")}})})]}),f&&(0,a.jsx)("div",{className:"status error mb-md",children:(0,a.jsx)("span",{children:f})}),(0,a.jsxs)("div",{className:"card-inner mb-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-sm mb-sm",children:[(0,a.jsx)("span",{style:{width:28,height:28,borderRadius:"50%",background:n?"var(--accent-success)":"var(--accent-primary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:"white"},children:n?"✓":"1"}),(0,a.jsx)("span",{className:"h3",children:"Initialize Deal Room"})]}),(0,a.jsx)("input",{className:"input mt-md",value:e,onChange:e=>t(e.target.value),disabled:!!n}),(0,a.jsx)("button",{className:"btn primary mt-md",onClick:j,disabled:!!n,style:{width:"100%"},children:n?"✓ Deal Room Initialized":"Create Deal Workspace"})]}),(0,a.jsxs)("div",{className:"card-inner mb-md",style:{opacity:n?1:.5},children:[(0,a.jsxs)("div",{className:"flex items-center gap-sm mb-sm",children:[(0,a.jsx)("span",{style:{width:28,height:28,borderRadius:"50%",background:r.length>0?"var(--accent-success)":n?"var(--accent-primary)":"var(--bg-elevated)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:"white"},children:r.length>0?"✓":"2"}),(0,a.jsx)("span",{className:"h3",children:"Upload Deal Set (Multi-File)"})]}),(0,a.jsxs)("div",{className:"mt-md",style:{border:"2px dashed ".concat(y?"var(--accent-primary)":"var(--border-default)"),borderRadius:"var(--radius-lg)",padding:32,textAlign:"center",background:y?"var(--accent-primary-dim)":"transparent",cursor:n?"pointer":"not-allowed",position:"relative"},onDragEnter:S,onDragLeave:S,onDragOver:S,onDrop:D,children:[(0,a.jsx)("div",{style:{fontSize:36,marginBottom:12},children:"\uD83D\uDCC1"}),h.length>0?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{fontWeight:600,color:"var(--accent-success)"},children:[h.length," Documents Selected"]}),(0,a.jsx)("div",{className:"small mt-sm",children:h.map(e=>e.name).join(", ")})]}):(0,a.jsx)("div",{className:"small",children:"Drag & drop Deal Set PDFs (CA, Side Letters, etc.)"}),(0,a.jsx)("input",{type:"file",multiple:!0,accept:"application/pdf",onChange:e=>p(Array.from(e.target.files||[])),disabled:!n,style:{position:"absolute",inset:0,opacity:0,cursor:"pointer"}})]}),(0,a.jsx)("button",{className:"btn mt-md",onClick:N,disabled:0===h.length||!!r.length,style:{width:"100%"},children:r.length>0?"✓ ".concat(r.length," Documents Uploaded"):"Upload Full Deal Set"})]}),(0,a.jsxs)("div",{className:"card-inner",style:{opacity:r.length>0?1:.5},children:[(0,a.jsxs)("div",{className:"flex items-center gap-sm mb-sm",children:[(0,a.jsx)("span",{style:{width:28,height:28,borderRadius:"50%",background:"complete"===o?"var(--accent-success)":r.length>0?"var(--accent-primary)":"var(--bg-elevated)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:"white"},children:"complete"===o?"✓":"3"}),(0,a.jsx)("span",{className:"h3",children:"Analyze & Cross-Reference"})]}),(0,a.jsx)("button",{className:"btn primary mt-md",onClick:w,disabled:0===r.length||"complete"===o,style:{width:"100%"},children:"processing"===o?"Contextualizing Intelligence...":"complete"===o?"✓ Deal Twin Generated":"Generate Digital Deal Twin"})]}),(0,a.jsx)("div",{className:"status mt-md ".concat("complete"===o?"ready":"processing"===o?"processing":""),children:u})]}),(0,a.jsxs)("div",{className:"flex-col gap-md",style:{display:"flex"},children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"h2",children:"Deal Summary"}),(0,a.jsxs)("div",{className:"kpi mt-md",children:[(0,a.jsxs)("div",{className:"box ".concat(n?"accent":""),children:[(0,a.jsx)("div",{className:"label",children:"Room ID"}),(0,a.jsx)("div",{className:"value",children:null!=n?n:"—"})]}),(0,a.jsxs)("div",{className:"box ".concat(r.length>0?"accent":""),children:[(0,a.jsx)("div",{className:"label",children:"Documents"}),(0,a.jsx)("div",{className:"value",children:r.length||h.length||"—"})]})]})]}),"complete"===o&&(0,a.jsxs)("div",{className:"card slide-up",children:[(0,a.jsx)("div",{className:"h2",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid-auto mt-md",style:{gridTemplateColumns:"1fr 1fr"},children:[(0,a.jsxs)("a",{href:"/dlr?loanId=".concat(n),className:"card-inner",style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{fontSize:24,marginBottom:8},children:"◉"}),(0,a.jsx)("div",{style:{fontWeight:600},children:"DLR Analysis"})]}),(0,a.jsxs)("a",{href:"/obligations?loanId=".concat(n),className:"card-inner",style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{fontSize:24,marginBottom:8},children:"◐"}),(0,a.jsx)("div",{style:{fontWeight:600},children:"Obligations"})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"h2",children:"Power User Features"}),(0,a.jsxs)("div",{className:"flex-col gap-md mt-md",style:{display:"flex"},children:[(0,a.jsxs)("div",{className:"flex gap-sm items-center",children:[(0,a.jsx)("span",{className:"tag primary",children:"Cmd+K"}),(0,a.jsx)("span",{className:"small",children:"Rapid navigation palette"})]}),(0,a.jsxs)("div",{className:"flex gap-sm items-center",children:[(0,a.jsx)("span",{className:"tag success",children:"Multi-Doc"}),(0,a.jsx)("span",{className:"small",children:"Cross-document intelligence"})]}),(0,a.jsxs)("div",{className:"flex gap-sm items-center",children:[(0,a.jsx)("span",{className:"tag warning",children:"Audit"}),(0,a.jsx)("span",{className:"small",children:"Full change tracking & logs"})]})]})]})]})]})}},6264:function(e,t,n){"use strict";n.d(t,{CM:function(){return f},DC:function(){return g},Jr:function(){return p},Qc:function(){return c},R5:function(){return r},RH:function(){return d},Rr:function(){return u},Rt:function(){return x},dp:function(){return m},tX:function(){return i},uF:function(){return y},x4:function(){return l},xc:function(){return h},z2:function(){return o}});let a=n(357).env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8010";async function s(e){if(!e.ok)throw Error(await e.text()||e.statusText);return e.json()}async function i(e){return s(await fetch("".concat(a,"/api/loans"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}))}async function c(){return s(await fetch("".concat(a,"/api/loans/sample"),{method:"POST"}))}async function r(e,t,n){return s(await fetch("".concat(a,"/api/auth/social-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:e,email:t,social_provider:n})}))}async function l(e,t){return s(await fetch("".concat(a,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}))}async function o(e,t,n){return s(await fetch("".concat(a,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:e,email:t,password:n})}))}async function d(e,t){let n=new FormData;return n.append("file",t),s(await fetch("".concat(a,"/api/loans/").concat(e,"/documents"),{method:"POST",body:n}))}async function u(e){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/documents")))}async function m(e,t){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/process-document/").concat(t),{method:"POST"}))}async function h(e){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/dlr")))}async function p(e,t){let n=t?"?query=".concat(encodeURIComponent(t)):"";return s(await fetch("".concat(a,"/api/loans/").concat(e,"/clauses").concat(n)))}async function f(e){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/obligations")))}async function g(e){return s(await fetch("".concat(a,"/api/loans/").concat(e,"/trade-pack")))}function y(e){return"".concat(a,"/api/documents/").concat(e,"/file")}async function x(){try{return(await fetch("".concat(a,"/api/health"))).ok}catch(e){return!1}}},357:function(e,t,n){"use strict";var a,s;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,a,s=e.exports={};function i(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function r(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:c}catch(e){n=c}}();var l=[],o=!1,d=-1;function u(){o&&a&&(o=!1,a.length?l=a.concat(l):d=-1,l.length&&m())}function m(){if(!o){var e=r(u);o=!0;for(var t=l.length;t;){for(a=l,l=[];++d<t;)a&&a[d].run();d=-1,t=l.length}a=null,o=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||o||r(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}},c=!0;try{t[e](i,i.exports,a),c=!1}finally{c&&delete n[e]}return i.exports}a.ab="//";var s=a(229);e.exports=s}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3716)}),_N_E=e.O()}]);